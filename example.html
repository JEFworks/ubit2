<!DOCTYPE html>
<meta charset="utf-8">
<head>
  <link rel="stylesheet" type="text/css" href="css/style.css">  
  <!-- Bootstrap -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">  
</head>

<body>

  <!-- Navbar -->
  <nav class="navbar navbar-default">
    <div class="container-fluid">
      <div class="navbar-header">
	<a class="navbar-brand" href="#">
	  ubit2
	</a>
      </div>
    </div>
  </nav>

  <div class="container">

    <h3>Data</h3>
    <textarea class="form-control" id="incsv">
20, 20, 80, 20, 234
200, 0, 23, 1, 234
22, 22, 90, 12, 12
250, 255, 253, 231, 234
100, 54, 100, 23, 232
0, 30, 70, 34, 2
255, 13, 8, 34, 2</textarea>

    <hr>
    
    <h3>Hierarchical Clustering Heatmap</h3>

    <form id="heatmapForm">     
     <!--  <input type="file" id="fileinput" class="form-control" /> -->

      <select id="cluster_by">
	<option value="row">row</option>
	<option value="col">column</option>
      </select>
      
      <select id="transform">
	<option value="none">none</option>
	<option value="log10">log10</option>
      </select>

      <select id="cluster_method">
	<option value="complete">complete</option>
	<option value="average">average</option>
	<option value="single">single</option>
      </select>

      <select id="distance_metric">
	<option value="euclidean">euclidean</option>
	<option value="manhattan">manhattan</option>
	<option value="max">max</option>
      </select>

      <button type="button" id="inbut" class="btn btn-primary">generate heatmap</button>
    </form>
    <br>
    <div id="dendro"></div>
    
  </div>
</body>

<script src="http://homepage.tudelft.nl/19j49/tsnejs/js/jquery-1.8.3.min.js"></script>
<script src="http://d3js.org/d3.v3.min.js"></script>
<script src="js/clusterfck.js"></script>
<script src="js/clusterfck_custom.js"></script>
<script src="js/main.js"></script>

<script type="text/javascript">
  var dataRaw;

  function preProData() {
    var txt = $("#incsv").val();
    var lines = txt.split("\n");
    var raw_data = [];
    var dlen = -1;
    for(var i = 0; i < lines.length;i++) {
       var row = lines[i].split(', ');
       var data_point = [];
       for(var j = 0; j < row.length; j++) {
	  if(row[j].length !== 0) {
	      data_point.push(parseFloat(row[j]));
	  }
       }
       raw_data.push(data_point);
    }
    dataRaw = raw_data; // set global
  }

								  
   $(window).load(function() {
     $("#inbut").click(function() {
       preProData();
       init(dataRaw);
     });
   });
</script>

</html>
