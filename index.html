---
layout: default
---

  <div class="container-fluid">

    <div class="row">
      <div class="col-sm-3">
	  <div class="panel panel-primary">
	    <div class="panel-heading">About ubit2</div>
	    <div class="panel-body">ubit2 enables fast, simple bioinformatics analysis online. Your data is never accessed or stored in any way. <br><br>
	      <a href="about.html">☞ Learn more ☜</a></div>
	  </div>
      </div>

      <div class="col-sm-9">
	<div class="panel panel-default">
	  <div class="panel-heading">Data
	    <a class="btn" data-toggle="collapse" href="#dataDesc" aria-expanded="false" aria-controls="dataDesc">
	      <span class="fa fa-lg fa-question-circle"></span>
	    </a>
	    <div class="collapse" id="dataDesc">
	      <div class="card card-block">
		Comma delimited gene expression matrix with genes as columns and samples as rows. First row must be gene symbols (for compatibility with gene set enrichment analysis). First column must be sample names. If more than 96 genes are inputted, the top 96 will be chosen for visualization and downstream analysis. Similarly, if more than 96 cells are inputted, the top 96 will be chosen for visualization and downstream analysis. If more cells than genes are inputted, cells will be removed so that there are no more cells than genes (for compatibility with principal component analysis).
	      </div>
	    </div>
	  </div>
	  <div class="panel-body">
	    <div class="row">
	      <div class="col-sm-9 container">
		<textarea class="form-control" id="incsv">
,ACTL6A,DPYSL3,EFNA5,GAP43,GPM6A,NDE1,NEUROD1,NEUROD6,SMARCB1,SRRM4,MCM2,MCM3,ORC6,PCNA,PHB,PRIM1,RFC3,RFC4,RPA2,RRM1,RRM2,SUPT16,ANAPC10,ANAPC4,BCCIP
NPC1_10_group1,2312,11218,2,0,2881,9182,6217,0,17118,1683,4957,8131,13,962,3463,2,64,168,80,16403,33268,26583,2143,0,0
NPC1_11_group2,740,6197,9241,0,0,2,1,1,5,6831,35,1,2,4467,3567,8185,90,2729,1,7441,205,1836,2811,13342,3968
NPC1_12_group2,89,24203,0,11012,511,0,20904,3876,16963,3429,0,0,4657,0,0,0,0,0,0,1,4,23,0,0,6447
NPC1_13_group2,254,25204,9123,19723,1010,0,13191,87158,8523,4126,1,0,0,16,6860,0,0,0,0,1,1478,1,0,3,3525
NPC1_14_group1,15582,1,1,3653,102,6424,0,0,3505,0,5701,27915,8569,21724,4164,4355,0,4721,3332,7918,37399,2622,0,72,2590
NPC1_15_group1,1,1,1511,32,0,3586,0,2,18005,0,6728,1955,3771,16085,8332,3383,2681,2648,4073,24692,28067,12689,1551,12357,2148
NPC1_16_group1,19690,1,12,69,1,5148,0,4,675,0,14029,26,7940,4958,5856,0,1,1,7192,10217,17352,888,10,0,10269
NPC1_17_group2,117,20416,9306,9610,11285,0,0,22116,5737,1226,0,0,1,1,4257,0,3666,3192,1,0,2,7304,2210,10318,228
NPC1_18_group2,474,5818,5186,0,4243,0,0,3,5526,0,1,0,0,0,0,0,1,0,0,0,1,0,0,3628,0
NPC1_19_group1,825,379,1,0,1,302,0,1,1199,1,582,246,323,398,596,180,294,0,356,532,2945,701,0,1,233
NPC1_1_group1,15664,296,0,30,0,10446,0,3,9444,2703,18069,6464,19497,18243,8054,0,290,4552,1437,15068,43645,0,0,1,2
NPC1_20_group1,527,4,1,1,4,7539,0,1,9752,774,6666,7403,3311,10222,384,2334,15050,7904,10410,13369,51011,1748,0,4,4836
NPC1_26_group1,8945,59,0,3814,1,17760,12109,5103,1792,956,885,0,1431,3365,1486,0,4133,5897,0,2724,31614,15677,18,1097,1714
NPC1_27_group2,16313,6443,14493,0,0,0,2,103629,14,30,0,0,0,0,195,0,2,1,0,0,3,0,0,2,1
NPC1_28_group2,1,13672,0,0,0,0,5798,14711,8644,1361,0,1,3800,1244,2619,0,4502,483,0,588,2365,17,124,6116,0
NPC1_29_group2,1,29441,12978,0,9239,0,1,2,17015,722,0,1,2,0,15160,2,0,0,1,47,2,376,3339,0,0
NPC1_2_group2,8024,3693,1417,2,0,3,15899,23828,7712,986,1,0,87,1,0,1,1,2,0,2422,417,26,0,7028,0
NPC1_30_group1,9066,0,0,0,0,2667,0,0,3618,0,3,23085,11027,3070,10003,4527,129,1726,0,865,25700,6775,1490,2,6066
NPC1_31_group1,9065,268,2,0,0,8837,1,4,36092,0,29,10320,0,5,9680,12504,0,4256,971,3774,2272,10489,0,17915,17948
NPC1_32_group2,476,21410,7771,0,0,1,12174,3,1234,1816,8,2,1,2099,4635,1,1,0,4648,654,73,3677,0,289,3
NPC1_33_group2,8430,2714,1,3777,0,0,209,18445,4483,583,4688,0,654,3336,1718,2250,1189,0,0,6376,15301,423,3279,253,107
NPC1_39_group2,1,6626,0,2423,331,0,4154,6339,0,453,0,0,239,3139,0,0,0,3180,0,0,296,275,0,43,0
NPC1_3_group1,8419,3,46,0,0,0,0,1,14914,1,8807,3346,6194,8635,2510,4260,3729,1,4205,8428,48867,1691,0,22,5369
NPC1_40_group2,0,15641,1,31,1,0,0,0,472,0,0,11,0,0,1,0,0,0,0,0,0,29842,0,0,1
NPC1_42_group2,1796,34956,6004,38403,5585,0,0,0,13584,958,0,1,3842,1528,0,0,5138,179,0,0,0,4743,4,6226,2242</textarea>
	      </div>
	      <div class="col-sm-3">	
		Transform data:
		<select id="transform" class="btn btn-default">
		  <option value="none">none</option>
		  <option value="log10">log10</option>
		</select>
		<br><br>
		<button type="button" id="inbut" class="btn btn-primary btn-block">analyze</button>
	      </div>
	    </div>
	  </div>
	</div>
      </div>      
    </div>
    
    <div class="row">      
      <div class="col-sm-3">
	<div class="panel panel-default">
	  <div class="panel-heading">Library Size Distribution</div>
	  <div class="panel-body" style="height:150px" id="hist_panel1">
	    <div id="hist1"></div>
	  </div>
	</div>
	<div class="panel panel-default">
	  <div class="panel-heading">Library Complexity Distribution</div>
	  <div class="panel-body" style="height:150px" id="hist_panel2">
	    <div id="hist2"></div>
	  </div>
	</div>
      </div>     
      
      <div class="col-sm-5">
	<div class="panel panel-default">
	  <div class="panel-heading">Hierarchical Clustering Heatmap</div>
	  <div class="panel-body" style="height:363px" id="heatmap_panel">
	    
	    Options:
	
	    <select id="cluster_method" class="btn btn-default">
	      <option value="complete">complete</option>
	      <option value="average">average</option>
	      <option value="single">single</option>
	    </select>
	    
	    <select id="distance_metric" class="btn btn-default">
	      <option value="euclidean">euclidean</option>
	      <option value="manhattan">manhattan</option>
	      <option value="max">max</option>
	    </select>
	    
	    <br><br>
	    
	    <div id="dendro"></div>
	  </div>
	  
	</div>
      </div>
      
      <div class="col-sm-4">
	<div class="panel panel-default">
	  <div class="panel-heading">Principal Component Analysis</div>
	  <div class="panel-body" style="height:363px" id="pca_panel">
	    <div id="pca"></div>
	  </div>
	</div>
      </div>
    </div>
    
    <div class="row">      
      <div class="col-sm-4">
	<div class="panel panel-default">
	  <div class="panel-heading">Volcano Plot</div>
	  <div class="panel-body" style="height:363px" id="volcano_panel">
	    <div id="volcano"></div>
	  </div>
	</div>
      </div>     

      <div class="col-sm-4">
	<div class="panel panel-default">
	  <div class="panel-heading">Differential Expression: P-value</div>
          <div class="panel-body" style="height:150px" id="diffexp_pval_panel">
	    
<!---  	    Options:
	
	    <select id="highlight_method" class="btn btn-default">
	      <option value="mtcsig_pval">bonf pval < 0.05</option>
	      <option value="sig_pval">pval < 0.05</option>
	    </select>
	    
	    <select id="sort_pval" class="btn btn-default">
	      <option value="original">original order</option>
	      <option value="decreasing">decreasing</option>
	    </select>
--->
	    <div id="diffexp_pval"></div>
	  </div>
        </div>

	<div class="panel panel-default">
	  <div class="panel-heading">Differential Expression: Fold Change</i></div>
          <div class="panel-body" style="height:150px" id="diffexp_fc_panel">
  	    <div id="diffexp_fc"></div>
	  </div>
	</div>

      </div>

      <div class="col-sm-4">
	<div class="panel panel-default">
	  <div class="panel-heading">Gene set enrichment</div>
	  <div class="panel-body" style="height:363px" id="gsea_panel">
	    <select id="geneset_selection" class="btn btn-default">
	      
	    </select>
	    <div id="mhg-chart"></div>
	  </div>
	</div>
      </div>     

    </div>
    
  </div>

<script src="js/jquery.min.js"></script>
<script src="js/d3-3.5.14.min.js"></script>
<script src="js/d3.tip.v0.6.3.js"></script>

<script src="js/clusterfck.js"></script>
<script src="js/clusterfck_custom.js"></script>
<script src="js/mannwhitneyu.js"></script>
<script src="js/pca.js"></script>
<script src="js/column-chart.js"></script>

<script src="js/mhg.js"></script>
<script src="js/mhg_custom.js"></script>

<script src="js/histogram.js"></script>
<script src="js/pcscatter.js"></script>
<script src="js/heatmap.js"></script>
<script src="js/ubit2.js"></script>
<script src="js/org.Hs.GO2Symbol.js"></script>

<script type="text/javascript">
  // global vars
  var dataRaw;
  var dataAll;
  var dataPro;
  
  function preProData() {
  
    var txt = $("#incsv").val();
    var lines = txt.split("\n");
    var rawData = [];
    var dlen = -1;
  
    var colNames = lines[0].split(',')
  
    for(var i = 1; i < lines.length;i++) {
      row = lines[i].split(',');
      var dataPoint = [];
      dataPoint['name'] = row[0];		       
      for(var j = 1; j < row.length; j++) {
        if(row[j].length !== 0) {
          dataPoint.push({name:colNames[j],value: parseFloat(row[j])});
        }
      }
      rawData.push(dataPoint);
    }
    dataRaw = rawData; // set global
  }
			 
  function draw(){
    initHeatmap();

    initDiffexpPca();
    initHist();

    drawMhg();
  };
  function init() {
    preProData(); // set dataRaw
    initData() // set dataPro
    initCalc(); // set dataPro
    initMhg();
    draw();
  };
  $(window).load(init);
  $("#inbut").click(init);
  $(window).resize(draw);
  
</script>

